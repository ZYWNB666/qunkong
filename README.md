# Qunkong - åˆ†å¸ƒå¼è¿ç»´ç®¡ç†å¹³å°

<div align="center">

ä¸€ä¸ªè½»é‡çº§ã€é«˜æ•ˆçš„åˆ†å¸ƒå¼è¿ç»´ç®¡ç†å¹³å°ï¼Œæ”¯æŒè¿œç¨‹è„šæœ¬æ‰§è¡Œã€Webç»ˆç«¯ã€æ–‡ä»¶ä¼ è¾“ç­‰åŠŸèƒ½ã€‚

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/)
[![React](https://img.shields.io/badge/react-18.2-blue.svg)](https://reactjs.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com/)
[![Docker](https://img.shields.io/badge/docker-ready-blue.svg)](https://www.docker.com/)

</div>

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸš€ è„šæœ¬æ‰§è¡Œ
- åœ¨çº¿ç¼–è¾‘å™¨ï¼ˆMonaco Editorï¼‰æ”¯æŒè¯­æ³•é«˜äº®
- æ”¯æŒShellã€Pythonç­‰å¤šç§è„šæœ¬è¯­è¨€
- æ‰¹é‡æ‰§è¡Œè„šæœ¬åˆ°å¤šä¸ªAgent
- å®æ—¶æŸ¥çœ‹æ‰§è¡Œè¾“å‡º
- æ”¯æŒè„šæœ¬å‚æ•°ä¼ é€’
- æ‰§è¡Œè¶…æ—¶æ§åˆ¶

### ğŸ’» Webç»ˆç«¯ï¼ˆPTYæ¨¡å¼ï¼‰
- åŸºäºxterm.jsçš„å…¨åŠŸèƒ½Webç»ˆç«¯
- çœŸå®PTYç»ˆç«¯ä½“éªŒï¼Œå®Œæ•´æ”¯æŒäº¤äº’å¼å‘½ä»¤
- æ”¯æŒsz/rzæ–‡ä»¶ä¼ è¾“ï¼ˆZMODEMåè®®ï¼‰
- å¤šæ ‡ç­¾é¡µç®¡ç†ï¼ŒåŒæ—¶è¿æ¥å¤šä¸ªAgent
- æ”¯æŒç»ˆç«¯å¤§å°åŠ¨æ€è°ƒæ•´
- æ”¯æŒ256è‰²æ˜¾ç¤º
- è·¨å¹³å°æ”¯æŒï¼ˆLinuxä¼˜å…ˆï¼ŒWindowséƒ¨åˆ†æ”¯æŒï¼‰

### ğŸ“Š ä»»åŠ¡ç¼–æ’
- ä½œä¸šç®¡ç†å’Œè°ƒåº¦
- æ”¯æŒå¤šæ­¥éª¤ä½œä¸šç¼–æ’
- ä¸»æœºç»„ç®¡ç†ï¼Œæ‰¹é‡æ‰§è¡Œ
- æ‰§è¡Œå†å²è®°å½•æŸ¥è¯¢
- æ”¯æŒä»»åŠ¡çŠ¶æ€è¿½è¸ª
- ä»»åŠ¡ç»“æœè¯¦ç»†å±•ç¤º
- æ”¯æŒæŒ‰é¡¹ç›®éš”ç¦»

### ğŸ–¥ï¸ Agentç®¡ç†
- Agentè‡ªåŠ¨æ³¨å†Œå’Œå¿ƒè·³æ£€æµ‹ï¼ˆæ¯3ç§’è‡ªåŠ¨åˆ·æ–°ï¼‰
- å®æ—¶æŸ¥çœ‹AgentçŠ¶æ€ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰
- å®æ—¶ç³»ç»Ÿèµ„æºç›‘æ§ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œï¼‰
- æ˜¾ç¤ºå…¬ç½‘IPå’Œå†…ç½‘IP
- æ”¯æŒLinuxç³»ç»Ÿï¼ˆWindowså®éªŒæ€§æ”¯æŒï¼‰
- WebSocketå®æ—¶é€šä¿¡
- Agentè¿œç¨‹é‡å¯åŠŸèƒ½
- ä¸»æœºè¿œç¨‹é‡å¯åŠŸèƒ½
- Agentåœ¨çº¿æ›´æ–°åŠŸèƒ½

### ğŸ‘¥ å¤šç§Ÿæˆ· & é¡¹ç›®éš”ç¦»
- ç§Ÿæˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
- é¡¹ç›®çº§åˆ«çš„èµ„æºéš”ç¦»
- çµæ´»çš„æƒé™æ§åˆ¶ï¼ˆç®¡ç†å‘˜/è¯»å†™/åªè¯»ï¼‰
- é¡¹ç›®æˆå‘˜ç®¡ç†
- è·¨é¡¹ç›®èµ„æºå…±äº«æ§åˆ¶
- é¡¹ç›®åˆ‡æ¢å™¨ï¼Œå¿«é€Ÿåˆ‡æ¢å·¥ä½œç¯å¢ƒ

### ğŸ” ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•ï¼ˆJWTè®¤è¯ï¼‰
- è§’è‰²æƒé™ç®¡ç†ï¼ˆè¶…çº§ç®¡ç†å‘˜/ç§Ÿæˆ·ç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
- ä¸ªäººèµ„æ–™è®¾ç½®
- å¯†ç ä¿®æ”¹
- ç”¨æˆ·çŠ¶æ€ç®¡ç†

### ğŸŒ é›†ç¾¤æ¨¡å¼ï¼ˆå¯é€‰ï¼‰
- åŸºäºRedisçš„åˆ†å¸ƒå¼æ¶æ„
- å¤šèŠ‚ç‚¹è´Ÿè½½å‡è¡¡
- Agentè·¨èŠ‚ç‚¹è®¿é—®
- ä¼šè¯çŠ¶æ€å…±äº«
- è‡ªåŠ¨æ•…éšœè½¬ç§»

## ğŸ“¦ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 18.2 + React Router 6
- **UIåº“**: Ant Design 5.8
- **æ„å»ºå·¥å…·**: Vite 4.4
- **ç¼–è¾‘å™¨**: Monaco Editorï¼ˆVS CodeåŒæ¬¾ï¼‰
- **ç»ˆç«¯**: @xterm/xterm 5.5
- **æ–‡ä»¶ä¼ è¾“**: zmodem.jsï¼ˆsz/rzåè®®ï¼‰
- **HTTPå®¢æˆ·ç«¯**: Axios 1.5

### åç«¯
- **æ¡†æ¶**: FastAPI 0.104+
- **ASGIæœåŠ¡å™¨**: Uvicornï¼ˆæ”¯æŒGunicornå¤šè¿›ç¨‹ï¼‰
- **WebSocket**: websockets 11.0
- **æ•°æ®åº“**: MySQL 8.0+ï¼ˆé€šè¿‡PyMySQL + DBUtilsè¿æ¥æ± ï¼‰
- **è®¤è¯**: JWTï¼ˆPyJWT 2.8ï¼‰
- **ç³»ç»Ÿä¿¡æ¯**: psutil 5.9
- **é›†ç¾¤æ”¯æŒ**: Redis 4.5+ï¼ˆå¯é€‰ï¼‰
- **æ•°æ®éªŒè¯**: Pydantic 2.0

### éƒ¨ç½²
- **å®¹å™¨åŒ–**: Docker + docker-compose
- **é•œåƒä»“åº“**: é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡
- **CI/CD**: GitHub Actionsï¼ˆè‡ªåŠ¨æ„å»ºé•œåƒå’ŒAgentï¼‰
- **WebæœåŠ¡å™¨**: nginxï¼ˆå‰ç«¯é™æ€æ–‡ä»¶æœåŠ¡ï¼‰
- **å¤šé˜¶æ®µæ„å»º**: ä¼˜åŒ–é•œåƒå¤§å°
- **è¿›ç¨‹ç®¡ç†**: systemdï¼ˆAgentæœåŠ¡ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/ZYWNB666/qunkong.git
cd qunkong
```

#### 2. ä½¿ç”¨ç”Ÿäº§é•œåƒéƒ¨ç½²
```bash
# æ‹‰å–æœ€æ–°é•œåƒå¹¶å¯åŠ¨æœåŠ¡ï¼ˆåŒ…å«MySQLã€Backendã€Frontendï¼‰
docker-compose -f docker-compose.prod.yml pull
docker-compose -f docker-compose.prod.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.prod.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f
```

#### 3. è®¿é—®ç³»ç»Ÿ
- **å‰ç«¯**: http://localhost ï¼ˆç«¯å£80ï¼‰
- **åç«¯API**: http://localhost:5000
- **APIæ–‡æ¡£**: http://localhost:5000/api/docs

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘éƒ¨ç½²

#### å‰ç½®è¦æ±‚
- Python 3.8+
- Node.js 18+
- MySQL 8.0+

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/ZYWNB666/qunkong.git
cd qunkong
```

#### 2. é…ç½®æ•°æ®åº“
```bash
# å¤åˆ¶æ•°æ®åº“é…ç½®æ¨¡æ¿
cp config/database.conf.template config/database.conf

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim config/database.conf
```

é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š
```ini
[database]
host = localhost
port = 3306
user = qunkong
password = your_password
database = qunkong

[server]
api_port = 5000
websocket_port = 8765

[cluster]
enabled = false
node_id = 

[redis]
enabled = false
host = localhost
port = 6379
db = 0
password = 
max_connections = 10
```

#### 3. åˆå§‹åŒ–æ•°æ®åº“
```bash
python scripts/init_database.py
```

#### 4. å¯åŠ¨åç«¯
```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å¼€å‘æ¨¡å¼å¯åŠ¨
python start_backend.py

# æˆ–ç”Ÿäº§æ¨¡å¼å¯åŠ¨ï¼ˆUvicornï¼‰
python start_production.py --mode uvicorn --workers 1

# æˆ–ç”Ÿäº§æ¨¡å¼å¯åŠ¨ï¼ˆGunicornï¼Œä»…Linux/Macï¼‰
python start_production.py --mode gunicorn --workers 4
```

#### 5. å¯åŠ¨å‰ç«¯
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd web

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ„å»º
npm run build
```

### éƒ¨ç½²Agent

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæ¨èï¼‰

ä»GitHub Releasesä¸‹è½½é¢„ç¼–è¯‘çš„AgentäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆè‡ªåŠ¨æ„å»ºï¼‰ï¼š

```bash
# ä¸‹è½½Agentï¼ˆä»¥Linuxä¸ºä¾‹ï¼‰
wget https://github.com/ZYWNB666/qunkong/releases/latest/download/qunkong-agent

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x qunkong-agent

# å¯åŠ¨Agent
./qunkong-agent --server SERVER_IP --port 8765

# è¯¦ç»†æ—¥å¿—æ¨¡å¼
./qunkong-agent --server SERVER_IP --port 8765 --verbose

# æŒ‡å®šAgent ID
./qunkong-agent --server SERVER_IP --port 8765 --agent-id my-agent-001
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨Pythonè„šæœ¬

```bash
# å¤åˆ¶Agentå®¢æˆ·ç«¯
scp app/client.py user@target-server:/opt/qunkong/

# å®‰è£…ä¾èµ–
pip install -r requirements-client.txt

# å¯åŠ¨Agent
python3 client.py --server SERVER_IP --port 8765
```

#### æ–¹å¼ä¸‰ï¼šä½¿ç”¨systemdæœåŠ¡ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# ä½¿ç”¨éƒ¨ç½²è„šæœ¬
cd deployment
sudo ./install-agent.sh

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status qunkong-agent

# å¯åŠ¨æœåŠ¡
sudo systemctl start qunkong-agent

# åœæ­¢æœåŠ¡
sudo systemctl stop qunkong-agent

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u qunkong-agent -f
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### è®¿é—®åœ°å€
- **å‰ç«¯**: http://localhost:3000ï¼ˆå¼€å‘æ¨¡å¼ï¼‰æˆ– http://localhostï¼ˆç”Ÿäº§æ¨¡å¼ï¼‰
- **åç«¯API**: http://localhost:5000
- **APIæ–‡æ¡£**: http://localhost:5000/api/docsï¼ˆSwagger UIï¼‰
- **WebSocket**: ws://localhost:8765

### é»˜è®¤è´¦å·
- **ç”¨æˆ·å**: admin
- **å¯†ç **: admin123

âš ï¸ é¦–æ¬¡ç™»å½•åå»ºè®®ç«‹å³ä¿®æ”¹å¯†ç ï¼

### ä½¿ç”¨æµç¨‹

1. **ç™»å½•ç³»ç»Ÿ** â†’ é€‰æ‹©æˆ–åˆ›å»ºé¡¹ç›®
2. **éƒ¨ç½²Agent** â†’ åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šå®‰è£…Agent
3. **ç®¡ç†Agent** â†’ æŸ¥çœ‹AgentçŠ¶æ€ï¼Œç¡®è®¤åœ¨çº¿ï¼ˆæ¯3ç§’è‡ªåŠ¨åˆ·æ–°ï¼‰
4. **åˆ›å»ºä½œä¸š** â†’ é…ç½®ä¸»æœºç»„å’Œæ‰§è¡Œæ­¥éª¤
5. **æ‰§è¡Œè„šæœ¬** â†’ ç¼–å†™è„šæœ¬å¹¶é€‰æ‹©ç›®æ ‡Agentæ‰§è¡Œ
6. **Webç»ˆç«¯** â†’ ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ“ä½œè¿œç¨‹æœåŠ¡å™¨
7. **æ–‡ä»¶ä¼ è¾“** â†’ ä½¿ç”¨sz/rzå‘½ä»¤ä¸Šä¼ ä¸‹è½½æ–‡ä»¶
8. **æŸ¥çœ‹å†å²** â†’ æŸ¥çœ‹æ‰§è¡Œå†å²å’Œç»“æœè¯¦æƒ…

### sz/rzæ–‡ä»¶ä¼ è¾“

åœ¨Webç»ˆç«¯ä¸­ï¼š
```bash
# ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°
sz filename

# ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
rz
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
qunkong/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ docker-build.yml         # Dockeré•œåƒè‡ªåŠ¨æ„å»º
â”‚       â””â”€â”€ build-agent.yml          # AgentäºŒè¿›åˆ¶è‡ªåŠ¨æ‰“åŒ…
â”œâ”€â”€ app/                             # åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ routers/                     # FastAPIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.py                  # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ agents.py                # Agentç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ tasks.py                 # ä»»åŠ¡ç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ simple_jobs.py           # ç®€å•ä½œä¸šè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ users.py                 # ç”¨æˆ·ç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ projects.py              # é¡¹ç›®ç®¡ç†è·¯ç”±
â”‚   â”‚   â””â”€â”€ tenants.py               # ç§Ÿæˆ·ç®¡ç†è·¯ç”±
â”‚   â”œâ”€â”€ models/                      # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py              # æ•°æ®åº“ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ auth.py                  # è®¤è¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ simple_jobs.py           # ä½œä¸šæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ project.py               # é¡¹ç›®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ tenant.py                # ç§Ÿæˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ middleware/                  # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ client.py                    # Agentå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ server_core.py               # WebSocketæœåŠ¡æ ¸å¿ƒ
â”‚   â”œâ”€â”€ cluster.py                   # é›†ç¾¤ç®¡ç†
â”‚   â”œâ”€â”€ cache.py                     # ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ main.py                      # FastAPIåº”ç”¨å…¥å£
â”‚   â””â”€â”€ fastapi_app.py               # FastAPIåº”ç”¨å·¥å‚
â”œâ”€â”€ web/                             # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/                   # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentManagement.jsx      # Agentç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ ScriptExecution.jsx      # è„šæœ¬æ‰§è¡Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ ExecutionHistory.jsx     # æ‰§è¡Œå†å²
â”‚   â”‚   â”‚   â”œâ”€â”€ Terminal.jsx             # Webç»ˆç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ SimpleJobs.jsx           # ä½œä¸šç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectManagement.jsx    # é¡¹ç›®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ UserManagement.jsx       # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ TenantManagement.jsx     # ç§Ÿæˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ UserProfile.jsx          # ä¸ªäººè®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx                # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ ProjectSelector.jsx      # é¡¹ç›®é€‰æ‹©å™¨
â”‚   â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ api.js               # APIå°è£…
â”‚   â”‚   â”œâ”€â”€ App.jsx                  # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ main.jsx                 # Reactå…¥å£
â”‚   â”œâ”€â”€ nginx.conf                   # Nginxé…ç½®
â”‚   â”œâ”€â”€ package.json                 # å‰ç«¯ä¾èµ–
â”‚   â””â”€â”€ vite.config.js               # Viteé…ç½®
â”œâ”€â”€ config/                          # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.conf.template       # æ•°æ®åº“é…ç½®æ¨¡æ¿
â”‚   â””â”€â”€ database.conf                # æ•°æ®åº“é…ç½®ï¼ˆéœ€åˆ›å»ºï¼‰
â”œâ”€â”€ scripts/                         # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ init_database.py             # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ init_complete.sql            # å®Œæ•´SQLè„šæœ¬
â”‚   â””â”€â”€ optimize_indexes.sql         # ç´¢å¼•ä¼˜åŒ–è„šæœ¬
â”œâ”€â”€ deployment/                      # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ install-agent.sh             # Agentå®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ uninstall-agent.sh           # Agentå¸è½½è„šæœ¬
â”‚   â””â”€â”€ qunkong-agent.service        # systemdæœåŠ¡æ–‡ä»¶
â”œâ”€â”€ test/                            # æµ‹è¯•å’Œå·¥å…·
â”‚   â”œâ”€â”€ build_client.py              # Agentæ‰“åŒ…è„šæœ¬
â”‚   â””â”€â”€ requirements-build.txt       # æ‰“åŒ…ä¾èµ–
â”œâ”€â”€ docs/                            # æ–‡æ¡£
â”‚   â”œâ”€â”€ DOCKER_BUILD.md              # Dockeræ„å»ºæ–‡æ¡£
â”‚   â”œâ”€â”€ IMAGE_BUILD_SUMMARY.md       # é•œåƒæ„å»ºæ€»ç»“
â”‚   â””â”€â”€ SQL_OPTIMIZATION.md          # SQLä¼˜åŒ–æ–‡æ¡£
â”œâ”€â”€ releases/                        # Agentå‘å¸ƒç›®å½•
â”‚   â”œâ”€â”€ qunkong-agent-latest         # æœ€æ–°AgentäºŒè¿›åˆ¶
â”‚   â””â”€â”€ README.md                    # å‘å¸ƒè¯´æ˜
â”œâ”€â”€ docker-compose.yml               # Dockerç¼–æ’ï¼ˆå¼€å‘ï¼‰
â”œâ”€â”€ docker-compose.prod.yml          # Dockerç¼–æ’ï¼ˆç”Ÿäº§ï¼‰
â”œâ”€â”€ Dockerfile.frontend              # å‰ç«¯é•œåƒ
â”œâ”€â”€ Dockerfile.backend               # åç«¯é•œåƒ
â”œâ”€â”€ start_backend.py                 # åç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_production.py              # ç”Ÿäº§ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”œâ”€â”€ requirements.txt                 # Pythonä¾èµ–
â””â”€â”€ requirements-client.txt          # Agentä¾èµ–
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

**å‰ç«¯**ï¼ˆæ„å»ºæ—¶ï¼‰:
```bash
VITE_API_URL=http://localhost:5000
VITE_WS_URL=ws://localhost:8765
```

**åç«¯**:
```bash
# æ•°æ®åº“é…ç½®æ–‡ä»¶è·¯å¾„
DATABASE_CONFIG=./config/database.conf
```

### Agenté…ç½®

ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°å¯åŠ¨Agentï¼š
```bash
# åŸºæœ¬å¯åŠ¨
./qunkong-agent --server SERVER_IP --port 8765

# è¯¦ç»†æ—¥å¿—
./qunkong-agent --server SERVER_IP --port 8765 --verbose

# æŒ‡å®šAgent ID
./qunkong-agent --server SERVER_IP --port 8765 --agent-id my-agent-001

# æŒ‡å®šæ—¥å¿—çº§åˆ«
./qunkong-agent --server SERVER_IP --port 8765 --log-level DEBUG
```

## ğŸ“Š ç³»ç»Ÿè¦æ±‚

### æœåŠ¡å™¨ç«¯
- CPU: 2æ ¸+
- å†…å­˜: 2GB+
- ç£ç›˜: 10GB+
- ç³»ç»Ÿ: Linux/Windows/macOS
- Docker: 20.10+ï¼ˆå¦‚ä½¿ç”¨Dockeréƒ¨ç½²ï¼‰

### AgentèŠ‚ç‚¹
- CPU: 1æ ¸+
- å†…å­˜: 512MB+
- ç³»ç»Ÿ: Linuxï¼ˆæ¨èUbuntu 20.04+/CentOS 7+ï¼‰
- Python: 3.8+ï¼ˆå¦‚ä½¿ç”¨Pythonè„šæœ¬æ–¹å¼ï¼‰

## ğŸ³ Dockeré•œåƒ

### é•œåƒä»“åº“
- **åœ°å€**: `registry.cn-shanghai.aliyuncs.com/zywdockers/qunkong`
- **æ ‡ç­¾è§„åˆ™**:
  - `backend-latest` - Backendæœ€æ–°ç‰ˆæœ¬
  - `backend-{æ—¶é—´æˆ³}` - Backendå¸¦æ—¶é—´æˆ³ç‰ˆæœ¬ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰
  - `frontend-latest` - Frontendæœ€æ–°ç‰ˆæœ¬
  - `frontend-{æ—¶é—´æˆ³}` - Frontendå¸¦æ—¶é—´æˆ³ç‰ˆæœ¬ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰

### è‡ªåŠ¨æ„å»º
æ¯æ¬¡ä»£ç æ¨é€åˆ°mainåˆ†æ”¯ï¼ŒGitHub Actionsä¼šè‡ªåŠ¨æ„å»ºå¹¶æ¨é€é•œåƒåˆ°é˜¿é‡Œäº‘ã€‚

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š[docs/IMAGE_BUILD_SUMMARY.md](docs/IMAGE_BUILD_SUMMARY.md)

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **ï¼šé¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹adminå¯†ç 
2. **ä¿®æ”¹é»˜è®¤ç«¯å£**ï¼šé¿å…ä½¿ç”¨é»˜è®¤çš„5000å’Œ8765ç«¯å£
3. **å¯ç”¨HTTPS**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨SSL/TLS
4. **æ•°æ®åº“å®‰å…¨**ï¼šä½¿ç”¨å¼ºå¯†ç ï¼Œé™åˆ¶è¿œç¨‹è®¿é—®
5. **é˜²ç«å¢™é…ç½®**ï¼šåªå¼€æ”¾å¿…è¦ç«¯å£ï¼ˆ80/443/5000/8765ï¼‰
6. **JWTå¯†é’¥**ï¼šä¿®æ”¹ä¸ºå¤æ‚çš„éšæœºå­—ç¬¦ä¸²
7. **å®šæœŸæ›´æ–°**ï¼šåŠæ—¶æ›´æ–°ä¾èµ–åŒ…ç‰ˆæœ¬
8. **Agentè®¤è¯**ï¼šä½¿ç”¨Agent IDéªŒè¯æœºåˆ¶

## ğŸ› æ•…éšœæ’æŸ¥

### Agentæ— æ³•è¿æ¥
```bash
# æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
telnet server-ip 8765

# æŸ¥çœ‹Agentæ—¥å¿—
journalctl -u qunkong-agent -f

# æ£€æŸ¥é˜²ç«å¢™
sudo firewall-cmd --list-all  # CentOS/RHEL
sudo ufw status                # Ubuntu
```

### ç»ˆç«¯æ— æ³•æ‰“å¼€
- æ£€æŸ¥WebSocketè¿æ¥çŠ¶æ€ï¼ˆæµè§ˆå™¨å¼€å‘è€…å·¥å…· â†’ Network â†’ WSï¼‰
- ç¡®è®¤Agentåœ¨çº¿ï¼ˆAgentç®¡ç†é¡µé¢ï¼‰
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- ç¡®è®¤æœåŠ¡å™¨é˜²ç«å¢™å·²å¼€æ”¾8765ç«¯å£

### æ–‡ä»¶ä¼ è¾“å¤±è´¥
- ç¡®è®¤æœåŠ¡å™¨å·²å®‰è£…lrzszï¼š
  ```bash
  # CentOS/RHEL
  yum install lrzsz
  
  # Ubuntu/Debian
  apt-get install lrzsz
  ```
- æ£€æŸ¥ç½‘ç»œç¨³å®šæ€§
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
- ç¡®è®¤æ–‡ä»¶å¤§å°ï¼ˆå»ºè®®å•ä¸ªæ–‡ä»¶<100MBï¼‰

### æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
- ç¡®è®¤database.confé…ç½®æ­£ç¡®
- æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™
- æŸ¥çœ‹åç«¯æ—¥å¿—

## ğŸ“ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# åç«¯å¼€å‘ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
python start_backend.py

# å‰ç«¯å¼€å‘
cd web
npm run dev
```

### APIæ–‡æ¡£

å¯åŠ¨åç«¯æœåŠ¡åè®¿é—®ï¼š
- Swagger UI: http://localhost:5000/api/docs
- ReDoc: http://localhost:5000/api/redoc
- OpenAPI JSON: http://localhost:5000/api/openapi.json

### ä»£ç è§„èŒƒ
- Python: PEP 8
- JavaScript: ESLint + Prettier
- æäº¤ä¿¡æ¯: éµå¾ª Conventional Commits è§„èŒƒ

### Agentæ‰“åŒ…

#### è‡ªåŠ¨æ„å»ºï¼ˆæ¨èï¼‰

æ¯æ¬¡ `app/client.py` æ–‡ä»¶æ›´æ–°æ—¶ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨æ„å»ºLinuxå¹³å°çš„AgentäºŒè¿›åˆ¶æ–‡ä»¶å¹¶å‘å¸ƒåˆ°Releasesã€‚

ä» [Releases](https://github.com/ZYWNB666/qunkong/releases) é¡µé¢ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ã€‚

#### æ‰‹åŠ¨æ‰“åŒ…

ä½¿ç”¨PyInstalleræ‰“åŒ…Agentä¸ºç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ï¼š

```bash
# å®‰è£…æ‰“åŒ…ä¾èµ–
pip install -r test/requirements-build.txt

# æ‰§è¡Œæ‰“åŒ…è„šæœ¬
python test/build_client.py

# æ‰“åŒ…åçš„æ–‡ä»¶ä½äº
dist/qunkong-agent
```

æ‰“åŒ…åçš„äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°çº¦ 15-20MBï¼ŒåŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œæ— éœ€å®‰è£…Pythonç¯å¢ƒå³å¯è¿è¡Œã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

è´¡çŒ®æŒ‡å—ï¼š
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤Pull Request

## ğŸ“„ License

[MIT License](LICENSE)

## ğŸ’¬ è”ç³»æ–¹å¼

- Issue: [GitHub Issues](https://github.com/ZYWNB666/qunkong/issues)
- Repository: https://github.com/ZYWNB666/qunkong

---

<div align="center">

Made with â¤ï¸ by Qunkong Team

**Star â­ this repository if you find it helpful!**

</div>

