# Qunkong - åˆ†å¸ƒå¼è¿ç»´ç®¡ç†å¹³å°

<div align="center">

![Qunkong](./public/logo.svg)

ä¸€ä¸ªè½»é‡çº§ã€é«˜æ•ˆçš„åˆ†å¸ƒå¼è¿ç»´ç®¡ç†å¹³å°ï¼Œæ”¯æŒè¿œç¨‹è„šæœ¬æ‰§è¡Œã€Webç»ˆç«¯ã€æ–‡ä»¶ä¼ è¾“ç­‰åŠŸèƒ½ã€‚

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/)
[![React](https://img.shields.io/badge/react-18.2-blue.svg)](https://reactjs.org/)

</div>

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸš€ è„šæœ¬æ‰§è¡Œ
- åœ¨çº¿ç¼–è¾‘å™¨ï¼ˆMonaco Editorï¼‰æ”¯æŒè¯­æ³•é«˜äº®
- æ”¯æŒShellã€Pythonç­‰å¤šç§è„šæœ¬è¯­è¨€
- æ‰¹é‡æ‰§è¡Œè„šæœ¬åˆ°å¤šä¸ªAgent
- å®æ—¶æŸ¥çœ‹æ‰§è¡Œè¾“å‡º

### ğŸ’» Webç»ˆç«¯
- åŸºäºxterm.jsçš„å…¨åŠŸèƒ½Webç»ˆç«¯
- æ”¯æŒsz/rzæ–‡ä»¶ä¼ è¾“ï¼ˆZMODEMåè®®ï¼‰
- å¤šæ ‡ç­¾é¡µç®¡ç†ï¼ŒåŒæ—¶è¿æ¥å¤šä¸ªAgent
- æ”¯æŒç»ˆç«¯å¤§å°è°ƒæ•´

### ğŸ“Š ä»»åŠ¡ç¼–æ’
- ä½œä¸šç®¡ç†å’Œè°ƒåº¦
- æ‰§è¡Œå†å²è®°å½•æŸ¥è¯¢
- æ”¯æŒä»»åŠ¡çŠ¶æ€è¿½è¸ª

### ğŸ–¥ï¸ Agentç®¡ç†
- Agentè‡ªåŠ¨æ³¨å†Œå’Œå¿ƒè·³æ£€æµ‹
- å®æ—¶æŸ¥çœ‹AgentçŠ¶æ€ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰
- æ”¯æŒLinuxç³»ç»Ÿï¼ˆå¯æ‰©å±•å…¶ä»–å¹³å°ï¼‰
- WebSocketå®æ—¶é€šä¿¡

### ğŸ‘¥ å¤šç§Ÿæˆ· & é¡¹ç›®éš”ç¦»
- ç§Ÿæˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
- é¡¹ç›®çº§åˆ«çš„èµ„æºéš”ç¦»
- çµæ´»çš„æƒé™æ§åˆ¶ï¼ˆç®¡ç†å‘˜/è¯»å†™/åªè¯»ï¼‰
- é¡¹ç›®æˆå‘˜ç®¡ç†

### ğŸ” ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•ï¼ˆJWTè®¤è¯ï¼‰
- è§’è‰²æƒé™ç®¡ç†
- ä¸ªäººèµ„æ–™è®¾ç½®
- å¯†ç ä¿®æ”¹

## ğŸ“¦ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 18.2 + React Router 6
- **UIåº“**: Ant Design 5.8
- **æ„å»ºå·¥å…·**: Vite 4.4
- **ç¼–è¾‘å™¨**: Monaco Editorï¼ˆVS CodeåŒæ¬¾ï¼‰
- **ç»ˆç«¯**: xterm.js 5.5
- **æ–‡ä»¶ä¼ è¾“**: zmodem.jsï¼ˆsz/rzåè®®ï¼‰

### åç«¯
- **æ¡†æ¶**: Flask 2.3
- **WebSocket**: websockets 11.0
- **æ•°æ®åº“**: MySQLï¼ˆé€šè¿‡PyMySQLï¼‰
- **è®¤è¯**: JWTï¼ˆPyJWT 2.8ï¼‰
- **ç³»ç»Ÿä¿¡æ¯**: psutil 5.9

### éƒ¨ç½²
- **å®¹å™¨åŒ–**: Docker + docker-compose
- **WebæœåŠ¡å™¨**: nginxï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- **å¤šé˜¶æ®µæ„å»º**: ä¼˜åŒ–é•œåƒå¤§å°ï¼ˆ~50MBï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Docker & Docker Compose
- MySQL 5.7+ï¼ˆæˆ–ä½¿ç”¨Dockeréƒ¨ç½²ï¼‰

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-org/qunkong.git
cd qunkong
```

### 2. é…ç½®æ•°æ®åº“
```bash
# å¤åˆ¶æ•°æ®åº“é…ç½®æ¨¡æ¿
cp config/database.conf.template config/database.conf

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim config/database.conf
```

é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š
```ini
[database]
host = localhost
port = 3306
user = qunkong
password = your_password
database = qunkong
```

### 3. åˆå§‹åŒ–æ•°æ®åº“
```bash
python scripts/init_database.py
```

### 4. Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰
```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d --build

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### 5. æ‰‹åŠ¨éƒ¨ç½²

#### åç«¯
```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨åç«¯æœåŠ¡
python start_backend.py
```

#### å‰ç«¯
```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ„å»º
npm run build
```

### 6. éƒ¨ç½²Agent

åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šï¼š

```bash
# å¤åˆ¶Agentå®¢æˆ·ç«¯
scp app/client.py user@target-server:/opt/qunkong/

# å®‰è£…ä¾èµ–
pip install -r requirements-client.txt

# ä½¿ç”¨systemdæœåŠ¡ï¼ˆæ¨èï¼‰
cd deployment
sudo ./install-agent.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
python3 client.py
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### è®¿é—®åœ°å€
- **å‰ç«¯**: http://localhost:3000
- **åç«¯API**: http://localhost:5000
- **WebSocket**: ws://localhost:8765

### é»˜è®¤è´¦å·
é¦–æ¬¡è¿è¡Œåï¼Œé€šè¿‡ç•Œé¢æ³¨å†Œç®¡ç†å‘˜è´¦å·ã€‚

### ä½¿ç”¨æµç¨‹

1. **ç™»å½•ç³»ç»Ÿ** â†’ åˆ›å»ºæˆ–é€‰æ‹©é¡¹ç›®
2. **éƒ¨ç½²Agent** â†’ åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šå®‰è£…Agent
3. **ç®¡ç†Agent** â†’ æŸ¥çœ‹AgentçŠ¶æ€ï¼Œç¡®è®¤åœ¨çº¿
4. **æ‰§è¡Œè„šæœ¬** â†’ ç¼–å†™è„šæœ¬å¹¶é€‰æ‹©ç›®æ ‡Agentæ‰§è¡Œ
5. **Webç»ˆç«¯** â†’ ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ“ä½œè¿œç¨‹æœåŠ¡å™¨
6. **æ–‡ä»¶ä¼ è¾“** â†’ ä½¿ç”¨sz/rzå‘½ä»¤ä¸Šä¼ ä¸‹è½½æ–‡ä»¶

### sz/rzæ–‡ä»¶ä¼ è¾“

åœ¨Webç»ˆç«¯ä¸­ï¼š
```bash
# ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°
sz filename

# ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
rz
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
qunkong/
â”œâ”€â”€ app/                      # åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ api/                  # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.py          # è®¤è¯API
â”‚   â”‚   â”œâ”€â”€ routes.py        # Agentç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ jobs.py          # ä½œä¸šç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ projects.py      # é¡¹ç›®ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ tenants.py       # ç§Ÿæˆ·ç®¡ç†API
â”‚   â”‚   â””â”€â”€ users.py         # ç”¨æˆ·ç®¡ç†API
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ client.py            # Agentå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ server_core.py       # WebSocketæœåŠ¡æ ¸å¿ƒ
â”‚   â””â”€â”€ main.py              # Flaskåº”ç”¨å…¥å£
â”œâ”€â”€ src/                      # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AgentManagement.jsx      # Agentç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ScriptExecution.jsx      # è„šæœ¬æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ ExecutionHistory.jsx     # æ‰§è¡Œå†å²
â”‚   â”‚   â”œâ”€â”€ Terminal.jsx             # Webç»ˆç«¯
â”‚   â”‚   â”œâ”€â”€ SimpleJobs.jsx           # ä½œä¸šç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ProjectManagement.jsx    # é¡¹ç›®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ UserManagement.jsx       # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ TenantManagement.jsx     # ç§Ÿæˆ·ç®¡ç†
â”‚   â”‚   â””â”€â”€ UserProfile.jsx          # ä¸ªäººè®¾ç½®
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ App.jsx              # åº”ç”¨å…¥å£
â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/                  # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ deployment/              # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ docker-compose.yml       # Dockerç¼–æ’
â”œâ”€â”€ Dockerfile.frontend      # å‰ç«¯é•œåƒ
â”œâ”€â”€ Dockerfile.backend       # åç«¯é•œåƒ
â””â”€â”€ nginx.conf               # Nginxé…ç½®
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

**å‰ç«¯**ï¼ˆæ„å»ºæ—¶ï¼‰:
```bash
VITE_API_URL=http://localhost:5000
VITE_WS_URL=ws://localhost:8765
```

**åç«¯**:
```bash
FLASK_ENV=production
DATABASE_CONFIG=./config/database.conf
```

### Agenté…ç½®

ç¼–è¾‘ `client.py` ä¸­çš„æœåŠ¡å™¨åœ°å€ï¼š
```python
SERVER_URL = "ws://your-server:8765"
```

## ğŸ“Š ç³»ç»Ÿè¦æ±‚

### æœåŠ¡å™¨ç«¯
- CPU: 2æ ¸+
- å†…å­˜: 2GB+
- ç£ç›˜: 10GB+
- ç³»ç»Ÿ: Linux/Windows/macOS

### AgentèŠ‚ç‚¹
- CPU: 1æ ¸+
- å†…å­˜: 512MB+
- ç³»ç»Ÿ: Linuxï¼ˆæ¨èUbuntu/CentOSï¼‰

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤ç«¯å£**ï¼šé¿å…ä½¿ç”¨é»˜è®¤çš„5000å’Œ8765ç«¯å£
2. **å¯ç”¨HTTPS**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨SSL/TLS
3. **æ•°æ®åº“å®‰å…¨**ï¼šä½¿ç”¨å¼ºå¯†ç ï¼Œé™åˆ¶è¿œç¨‹è®¿é—®
4. **é˜²ç«å¢™é…ç½®**ï¼šåªå¼€æ”¾å¿…è¦ç«¯å£
5. **JWTå¯†é’¥**ï¼šä¿®æ”¹ä¸ºå¤æ‚çš„éšæœºå­—ç¬¦ä¸²
6. **å®šæœŸæ›´æ–°**ï¼šåŠæ—¶æ›´æ–°ä¾èµ–åŒ…ç‰ˆæœ¬

## ğŸ› æ•…éšœæ’æŸ¥

### Agentæ— æ³•è¿æ¥
```bash
# æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
telnet server-ip 8765

# æŸ¥çœ‹Agentæ—¥å¿—
journalctl -u qunkong-agent -f

# æ£€æŸ¥é˜²ç«å¢™
sudo firewall-cmd --list-all
```

### ç»ˆç«¯æ— æ³•æ‰“å¼€
- æ£€æŸ¥WebSocketè¿æ¥çŠ¶æ€
- ç¡®è®¤Agentåœ¨çº¿
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### æ–‡ä»¶ä¼ è¾“å¤±è´¥
- ç¡®è®¤æœåŠ¡å™¨å·²å®‰è£…lrzszï¼š`yum install lrzsz` æˆ– `apt-get install lrzsz`
- æ£€æŸ¥ç½‘ç»œç¨³å®šæ€§
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—

## ğŸ“ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# åç«¯å¼€å‘
cd app
python main.py

# å‰ç«¯å¼€å‘
npm run dev
```

### ä»£ç è§„èŒƒ
- Python: PEP 8
- JavaScript: ESLint + Prettierï¼ˆæ¨èï¼‰
- æäº¤ä¿¡æ¯: ä½¿ç”¨æœ‰æ„ä¹‰çš„commit message

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ License

[MIT License](LICENSE)

## ğŸ’¬ è”ç³»æ–¹å¼

- Issue: [GitHub Issues](https://github.com/your-org/qunkong/issues)
- Email: your-email@example.com

---

<div align="center">
Made with â¤ï¸ by Qunkong Team
</div>

